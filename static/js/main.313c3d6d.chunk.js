(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{10:function(e,t,n){"use strict";var a=n(95),r=n(2),s=n.n(r),c=n(3),i=n(13),o=n(33),u=n(18),l=n(24),d=null;function p(){return f.apply(this,arguments)}function f(){return(f=Object(c.a)(s.a.mark(function e(){var t,n;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(l.a)();case 2:if(t=e.sent,d){e.next=10;break}return e.next=6,t.orbitdb.docs("knownFeeds");case 6:return n=e.sent,e.next=9,n.load();case 9:d=n;case 10:return e.abrupt("return",d);case 11:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function h(e){return m.apply(this,arguments)}function m(){return(m=Object(c.a)(s.a.mark(function e(t){var n,a,r,c,i,o,l,d,f;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.userHash,a=t.userAddress,r=t.metaAddress,c=t.feedAddress,e.next=3,p();case 3:return i=e.sent,o={userAddress:a,metaAddress:r,feedAddress:c},l=i.get(n),d=l?l[0]:{},f=Object.assign({},d,o),e.next=10,i.put(Object(u.a)({_id:n},f));case 10:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function v(){return b.apply(this,arguments)}function b(){return(b=Object(c.a)(s.a.mark(function e(){var t;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p();case 2:return t=e.sent,e.abrupt("return",t.query(function(e){return e.pinned}).map(function(e){return e._id}));case 4:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function E(e,t){return g.apply(this,arguments)}function g(){return(g=Object(c.a)(s.a.mark(function e(t,n){var a,r;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p();case 2:return a=e.sent,r=a.get(t)[0],e.next=6,a.put(Object.assign({},r,{pinned:n}));case 6:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function O(e,t,n){return y.apply(this,arguments)}function y(){return(y=Object(c.a)(s.a.mark(function e(t,n,a){var r,i,d,p,f,m,v,b,E,g,O,y,j,x,k,N,w,C,S,D,A,I;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return A=function(){return(A=Object(c.a)(s.a.mark(function e(){var n,a,c,o;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r&&p&&d&&i){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,r.swarm.peers();case 4:return n=e.sent,e.next=7,r.pubsub.peers(p.address.toString());case 7:return a=e.sent,e.next=10,r.pubsub.peers(d.address.toString());case 10:return c=e.sent,e.next=13,r.pubsub.peers(i.address.toString());case 13:o=e.sent,t(null,"peers",{networkPeers:n,userDbPeers:a,feedDbPeers:c,userMetaDbPeers:o});case 15:case"end":return e.stop()}},e,this)}))).apply(this,arguments)},D=function(){return A.apply(this,arguments)},S=function(e){return d?d.get(e):t("NO_USER_FEED")},C=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;return d?d.iterator({limit:n,lt:e}).collect().map(function(e){return Object(u.a)({},e.payload.value,{hash:e.hash,next:e.next.length})}):t("NO_USER_FEED")},w=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10;if(!d)return t("NO_USER_FEED");var n=Object.keys(d._index._index).length;return d.iterator({limit:e}).collect().map(function(e){return Object(u.a)({},e.payload.value,{hash:e.hash,next:e.next.length,feedLen:n})})},N=function(){return i?i.get("value"):t("NO_USER_META")},k=function(){return(k=Object(c.a)(s.a.mark(function e(n){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(d){e.next=2;break}return e.abrupt("return",t("NO_USER_FEED"));case 2:d.remove(n);case 3:case"end":return e.stop()}},e,this)}))).apply(this,arguments)},x=function(e){return k.apply(this,arguments)},j=function(){return(j=Object(c.a)(s.a.mark(function e(n){var a,r,c;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.title,r=n.description,c=n.text,d){e.next=3;break}return e.abrupt("return",t("NO_USER_FEED"));case 3:d.add({createdAt:Date.now(),text:c,title:a,description:r});case 4:case"end":return e.stop()}},e,this)}))).apply(this,arguments)},y=function(e){return j.apply(this,arguments)},O=function(e){return i?n?t("INVALID_OPERATION_SET_META"):void i.set("value",e):t("NO_USER_META")},g=function(){return(g=Object(c.a)(s.a.mark(function e(){var r,u,l,m,v,b;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return b=function(){return(b=Object(c.a)(s.a.mark(function e(){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(d){e.next=2;break}return e.abrupt("return");case 2:t(null,"userFeed",w());case 3:case"end":return e.stop()}},e,this)}))).apply(this,arguments)},v=function(){return b.apply(this,arguments)},m=function(){return(m=Object(c.a)(s.a.mark(function e(){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(i){e.next=2;break}return e.abrupt("return");case 2:t(null,"userMeta",N());case 3:case"end":return e.stop()}},e,this)}))).apply(this,arguments)},l=function(){return m.apply(this,arguments)},u=function(){return(u=Object(c.a)(s.a.mark(function e(){var r,c,u,m;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!i||!d){e.next=2;break}return e.abrupt("return");case 2:if(r=p.iterator({limit:-1}).collect().map(function(e){return e.payload.value}),c=Object(o.a)(r,2),u=c[0],m=c[1],u&&m){e.next=5;break}return e.abrupt("return");case 5:return e.next=7,f.keyvalue(u);case 7:return i=e.sent,e.next=10,f.feed(m);case 10:return d=e.sent,h({userHash:a,userAddress:n,metaAddress:u,feedAddress:m}),i.events.on("replicated",function(){console.log("meta REPLICATED!"),l(),t(null,"replicated","meta")}),i.events.on("replicate",function(){console.log("meta REPLICATE!"),t(null,"replicate","meta")}),i.events.on("meta ready",function(e){console.log("READY",e,p)}),i.events.on("meta replicate.progress",function(e,t,n,a,r){return console.log("REPLICATE progress",e,t,n,a,r)}),d.events.on("replicated",function(){console.log("feedDb REPLICATED!"),v(),t(null,"replicated","feed")}),d.events.on("replicate",function(){console.log("feedDb REPLICATE!"),t(null,"replicate","feed")}),d.events.on("feedDb ready",function(e){console.log("READY",e,p)}),d.events.on("feedDb replicate",function(e){return console.log("REPLICATE",e)}),d.events.on("feedDb replicate.progress",function(e,t,n,a,r){return console.log("REPLICATE progress",e,t,n,a,r)}),e.next=23,i.load();case 23:return e.next=25,d.load();case 25:l(),v();case 27:case"end":return e.stop()}},e,this)}))).apply(this,arguments)},r=function(){return u.apply(this,arguments)},e.next=8,f.log(n,{sync:!0,replicate:!0,create:!0});case 8:return(p=e.sent).events.on("replicated",r),p.events.on("replicate.progress",function(e,t,n,a,r){return console.log("REPLICATE progress",e,t,n,a,r)}),t(null,"userAddress",p.address.toString()),e.next=14,p.load();case 14:r();case 15:case"end":return e.stop()}},e,this)}))).apply(this,arguments)},E=function(){return g.apply(this,arguments)},b=function(){return(b=Object(c.a)(s.a.mark(function e(){var n,a,r,c;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.log("user",m);case 2:return p=e.sent,e.next=5,p.load();case 5:if(t(null,"userAddress",p.address.toString()),n=p.iterator({limit:-1}).collect().map(function(e){return e.payload.value}),a=Object(o.a)(n,2),r=a[0],c=a[1],r){e.next=14;break}return e.next=10,f.keyvalue("userMeta",m);case 10:i=e.sent,p.add(i.address.toString()),e.next=17;break;case 14:return e.next=16,f.keyvalue(r);case 16:i=e.sent;case 17:if(c){e.next=24;break}return e.next=20,f.feed("userFeed",m);case 20:d=e.sent,p.add(d.address.toString()),e.next=27;break;case 24:return e.next=26,f.feed(c);case 26:d=e.sent;case 27:return e.next=29,i.load();case 29:return t(null,"userMeta",N()),i.events.on("write",function(){return t(null,"userMeta",N())}),e.next=33,d.load();case 33:t(null,"userFeed",w()),d.events.on("write",function(){return t(null,"userFeed",w())});case 35:case"end":return e.stop()}},e,this)}))).apply(this,arguments)},v=function(){return b.apply(this,arguments)},e.prev=15,e.next=18,Object(l.a)();case 18:I=e.sent,e.next=25;break;case 21:return e.prev=21,e.t0=e.catch(15),t("ERROR_INITIALIZING_IPFS"),e.abrupt("return");case 25:return r=I.ipfs,f=I.orbitdb,m=I.access,setInterval(D,1e4),e.abrupt("return",n?{load:E,getUserArticle:S,getFeedPage:C}:{load:v,setUserMeta:O,addToFeed:y,deleteFromFeed:x,getUserArticle:S,getFeedPage:C});case 30:case"end":return e.stop()}},e,this,[[15,21]])}))).apply(this,arguments)}var j=n(44),x=n(45);n.d(t,"f",function(){return M}),n.d(t,"b",function(){return B}),n.d(t,"i",function(){return _}),n.d(t,"g",function(){return U}),n.d(t,"h",function(){return z}),n.d(t,"e",function(){return Y}),n.d(t,"j",function(){return V}),n.d(t,"a",function(){return q}),n.d(t,"d",function(){return Z}),n.d(t,"c",function(){return ne});var k="CREATE_USER",N="SET_USERDB_ADDR",w="SET_USER_FEED",C="SET_USER_METADATA",S="SET_USERDB_INSTANCE",D="SET_USER_MASTER",A="SET_USER_HASH",I="ADD_ARTICLE",T="SET_USER_PINNED",P="SET_REPLICATION",F="ADD_USER_FEED",L=Object(i.Record)({dbInstance:null,metadata:null,feed:null,articles:Object(i.Map)({}),dbAddress:null,hash:null,replication:Object(i.Map)({meta:!1,feed:!1,metaProgress:Object(i.Map)({total:0,current:0}),feedProgress:Object(i.Map)({total:0,current:0})}),pinned:!1,isMaster:!1}),R=Object(i.Map)();function M(){return function(){var e=Object(c.a)(s.a.mark(function e(t){var n,a,r,c,i,o,u;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v();case 2:for(n=e.sent,a=!0,r=!1,c=void 0,e.prev=6,i=n[Symbol.iterator]();!(a=(o=i.next()).done);a=!0)u=o.value,t(H(u));e.next=14;break;case 10:e.prev=10,e.t0=e.catch(6),r=!0,c=e.t0;case 14:e.prev=14,e.prev=15,a||null==i.return||i.return();case 17:if(e.prev=17,!r){e.next=20;break}throw c;case 20:return e.finish(17);case 21:return e.finish(14);case 22:case"end":return e.stop()}},e,this,[[6,10,14,22],[15,,17,21]])}));return function(t){return e.apply(this,arguments)}}()}function B(e){return function(){var t=Object(c.a)(s.a.mark(function t(n,a){var r,c,i;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:r=a().users.get(e),c=r.feed.first().hash,i=r.dbInstance.getFeedPage(c),n(J(e,i));case 4:case"end":return t.stop()}},t,this)}));return function(e,n){return t.apply(this,arguments)}}()}function _(e,t){return function(){var n=Object(c.a)(s.a.mark(function n(a){return s.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:E(e,t),a(G(e,t));case 2:case"end":return n.stop()}},n,this)}));return function(e){return n.apply(this,arguments)}}()}function U(e,t){return function(){var n=Object(c.a)(s.a.mark(function n(a,r){var c,i;return s.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(!r().users.get(e)){n.next=2;break}return n.abrupt("return",console.info("hash ".concat(e," requested, but it was already loaded (probably because it was pinned)")));case 2:return a(Q(e)),c="/orbitdb/".concat(e,"/user"),n.next=6,O(function(){for(var t=arguments.length,n=new Array(t),s=0;s<t;s++)n[s]=arguments[s];return W.apply(void 0,n.concat([e,a,r]))},c,e);case 6:i=n.sent,a(K(e,i)),a(ee(e)),t&&a(G(e,!0)),i.load();case 11:case"end":return n.stop()}},n,this)}));return function(e,t){return n.apply(this,arguments)}}()}function H(e){return function(){var t=Object(c.a)(s.a.mark(function t(n,a){return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:a().users.get(e)?n(G(e,!0)):n(U(e,!0));case 1:case"end":return t.stop()}},t,this)}));return function(e,n){return t.apply(this,arguments)}}()}function z(){var e=null,t=null;return function(){var n=Object(c.a)(s.a.mark(function n(a,r){return s.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,O(function(n,s,c){if(n)return W(n,s,c,t,a,r);if("userAddress"===s){var i=c;t=i.split("/")[2],a(Q(t)),a($(t,!0)),a(ee(t)),a(X(t,i)),a(K(t,e))}else t||console.error("RACE CONDITION!!!"),W(n,s,c,t,a,r)});case 2:(e=n.sent).load();case 4:case"end":return n.stop()}},n,this)}));return function(e,t){return n.apply(this,arguments)}}()}function W(e,t,n,a,r,s){if(e)return r(Object(x.b)(e));switch(t){case"userAddress":r(X(a,n));break;case"userMeta":r(function(e,t){return{type:C,metadata:t,hash:e}}(a,n));break;case"userFeed":r(function(e,t){return{type:w,feed:t,hash:e}}(a,n));break;case"replicate":r(te(a,n,!0));break;case"replicated":var c=s().users.get(a),i=c.metadata&&c.metadata.has("name")?"".concat(c.metadata.get("name"),"'s feed was just updated"):"A feed was just updated";console.log("notification",i),r(Object(j.a)({feedLink:a,message:i})),r(te(a,n,!1))}}function Y(e,t){return function(n,a){var r=a().users.get(e).dbInstance.getUserArticle(t);r&&r.hash===t&&n(function(e,t,n){return{type:I,userHash:e,articleHash:t,article:n}}(e,t,r.payload.value))}}function V(e){return function(t,n){n().users.find(function(e){return e.isMaster}).dbInstance.setUserMeta(e)}}function q(e){var t=e.title,n=e.description,a=e.text;return function(e,r){r().users.find(function(e){return e.isMaster}).dbInstance.addToFeed({title:t,description:n,text:a})}}function Z(e){return function(t,n){n().users.find(function(e){return e.isMaster}).dbInstance.deleteFromFeed(e)}}function J(e,t){return{type:F,feed:t,hash:e}}function Q(e){return{type:k,hash:e}}function G(e,t){return{type:T,hash:e,pinned:t}}function K(e,t){return{type:S,dbInstance:t,hash:e}}function X(e,t){return{type:N,hash:e,address:t}}function $(e,t){return{type:D,isMaster:t,hash:e}}function ee(e){return{type:A,hash:e}}function te(e,t,n){return{type:P,userHash:e,dataType:t,value:n}}function ne(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:R,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case k:return e.get(t.hash)?e:e.set(t.hash,new L);case S:return e.setIn([t.hash,"dbInstance"],t.dbInstance);case N:return e.setIn([t.hash,"dbAddress"],t.address);case F:return e.updateIn([t.hash,"feed"],function(e){return e.unshift.apply(e,Object(a.a)(t.feed))});case w:return e.setIn([t.hash,"feed"],Object(i.List)(t.feed));case C:return e.setIn([t.hash,"metadata"],Object(i.Map)(t.metadata));case D:return e.setIn([t.hash,"isMaster"],t.isMaster);case A:return e.setIn([t.hash,"hash"],t.hash);case T:return e.setIn([t.hash,"pinned"],t.pinned);case I:return e.setIn([t.userHash,"articles",t.articleHash],t.article);case P:return e.setIn([t.userHash,"replication",t.dataType],t.value);default:return e}}},101:function(e,t,n){},109:function(e,t,n){},111:function(e,t,n){},113:function(e,t,n){},117:function(e,t,n){},131:function(e,t,n){},133:function(e,t,n){},135:function(e,t,n){},137:function(e,t,n){},139:function(e,t,n){},141:function(e,t,n){},20:function(e,t,n){"use strict";var a=n(0),r=n.n(a),s=n(14),c=n(4),i=n(5),o=n(7),u=n(6),l=n(8),d=(n(109),n(32)),p=n.n(d),f=document.getElementById("root"),h=function(e){function t(){return Object(c.a)(this,t),Object(o.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(l.a)(t,e),Object(i.a)(t,[{key:"preventScroll",value:function(e){e.preventDefault()}},{key:"componentDidMount",value:function(){this.node.addEventListener("wheel",this.preventScroll,!1),this.node.addEventListener("touchmove",this.preventScroll,!1)}},{key:"componentWillUnmount",value:function(){this.node.removeEventListener("wheel",this.preventScroll,!1),this.node.removeEventListener("touchmove",this.preventScroll,!1)}},{key:"render",value:function(){var e=this,t=this.props.children;return p.a.createPortal(r.a.createElement("div",{ref:function(t){return e.node=t},className:"Modal"},r.a.createElement("div",{className:"ModalBackdrop"},r.a.createElement("div",{className:"ModalContent"},t))),f)}}]),t}(r.a.Component);n(111);function m(e){var t=e.text,n=e.buttons;return r.a.createElement(h,null,r.a.createElement(s.a,{className:"confirmationAlert"}),r.a.createElement("div",{className:"confirmationText"},t),r.a.createElement("div",{className:"confirmationButtons"},n))}n.d(t,"a",function(){return m})},24:function(e,t,n){"use strict";(function(e){var a,r=n(2),s=n.n(r),c=n(3),i=!1,o=[];function u(){return l.apply(this,arguments)}function l(){return(l=Object(c.a)(s.a.mark(function t(){var n;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:console.log("Starting IPFS"),i=!0,(n=new e.Ipfs({repo:"/vitriol/",EXPERIMENTAL:{pubsub:!0},config:{Addresses:{Swarm:["/dns4/star-signal.cloud.ipfs.team/udp/443/wss/p2p-webrtc-star"]}},start:!0})).on("error",function(e){console.error(e),d(e)}),n.on("ready",Object(c.a)(s.a.mark(function t(){var r,c;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:console.info("IPFS Started"),r=new e.OrbitDB(n),c={write:[r.key.getPublic("hex")]},d(null,a={orbitdb:r,access:c,ipfs:n});case 5:case"end":return t.stop()}},t,this)})));case 5:case"end":return t.stop()}},t,this)}))).apply(this,arguments)}function d(e,t){for(var n=0;n<o.length;n++){(0,o[n])(e,t)}}function p(){return(p=Object(c.a)(s.a.mark(function e(t){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a&&t(null,a),i||u(),o.push(t);case 3:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}t.a=function(){return new Promise(function(e,t){return function(e){return p.apply(this,arguments)}(function(n,a){return n?t(n):e(a)})})}}).call(this,n(25))},248:function(e,t,n){},250:function(e,t,n){},252:function(e,t,n){},254:function(e,t,n){},256:function(e,t,n){},258:function(e,t,n){},260:function(e,t,n){},262:function(e,t,n){},264:function(e,t,n){"use strict";n.r(t);var a={};n.r(a),n.d(a,"users",function(){return v.c}),n.d(a,"notifications",function(){return b.b}),n.d(a,"drafts",function(){return U}),n.d(a,"error",function(){return H.a});var r=n(0),s=n.n(r),c=n(32),i=n.n(c),o=(n(101),n(4)),u=n(5),l=n(7),d=n(6),p=n(8),f=n(9),h=n(23),m=n(87),v=n(10),b=n(44),E=n(2),g=n.n(E),O=n(3),y=n(13),j=n(33),x=n(18),k=n(24),N=null;function w(){return C.apply(this,arguments)}function C(){return(C=Object(O.a)(g.a.mark(function e(){var t;return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(k.a)();case 2:if(t=e.sent,N){e.next=9;break}return e.next=6,t.orbitdb.docs("drafts",{indexBy:"createdAt"});case 6:return N=e.sent,e.next=9,N.load();case 9:return e.abrupt("return",N);case 10:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function S(e){return D.apply(this,arguments)}function D(){return(D=Object(O.a)(g.a.mark(function e(t){var n,a;return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w();case 2:return n=e.sent,a=Date.now(),e.next=6,n.put(Object(x.a)({},t,{savedAt:a,createdAt:a}));case 6:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function A(e,t){return I.apply(this,arguments)}function I(){return(I=Object(O.a)(g.a.mark(function e(t,n){var a,r,s,c,i;return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w();case 2:return a=e.sent,r=Date.now(),s=a.get(t),c=Object(j.a)(s,1),i=c[0],e.next=7,a.put(Object.assign(i,n,{savedAt:r}));case 7:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function T(e){return P.apply(this,arguments)}function P(){return(P=Object(O.a)(g.a.mark(function e(t){var n;return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w();case 2:return n=e.sent,e.next=5,n.del(t);case 5:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function F(){return L.apply(this,arguments)}function L(){return(L=Object(O.a)(g.a.mark(function e(){var t,n;return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w();case 2:return t=e.sent,n=t.query(function(e){return!0}).sort(function(e,t){return e.savedAt<t.savedAt}),e.abrupt("return",n);case 5:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}var R="SET_DRAFTS";function M(e){return function(){var t=Object(O.a)(g.a.mark(function t(n,a){var r;return g.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,T(e);case 2:return t.next=4,F();case 4:r=t.sent,n(B(r));case 6:case"end":return t.stop()}},t,this)}));return function(e,n){return t.apply(this,arguments)}}()}function B(e){return{type:R,drafts:e}}var _=Object(y.Map)({draftList:Object(y.List)([])});function U(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_DRAFTS":return e.set("draftList",Object(y.List)(t.drafts));default:return e}}var H=n(45),z=Object(h.d)(Object(h.c)(a),{},Object(h.a)(m.a)),W=n(270),Y=n(265),V=n(271),q=n(269),Z=n(20),J=n(268);function Q(e){var t=e.className,n=void 0===t?"":t,a=e.strokeWidth,r=void 0===a?10:a;return s.a.createElement("svg",{className:"Logo ".concat(n),width:"202",height:"201",viewBox:"0 0 202 201",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s.a.createElement("g",{strokeWidth:r},s.a.createElement("path",{d:"M192.799 32L101 191L9.20131 32L192.799 32Z",fill:"white",stroke:"black"}),s.a.createElement("line",{x1:"3.49691e-07",y1:"4",x2:"200",y2:"4",stroke:"black"}),s.a.createElement("line",{x1:"4.37114e-07",y1:"100",x2:"200",y2:"100",stroke:"black"})))}n(113);var G=function(e){function t(){return Object(o.a)(this,t),Object(l.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props.users.find(function(e){return e.isMaster}),t=e?e.hash:null,n=e&&e.metadata&&e.metadata.size?"/".concat(t):"/profile";return s.a.createElement("div",{className:"HeaderContainer"},s.a.createElement("div",{className:"Header"},s.a.createElement(Q,{className:"HeaderLogo"}),s.a.createElement(J.a,{activeClassName:"current",className:"ButtonTab",to:"/home"},"Home")," ",s.a.createElement(J.a,{activeClassName:"current",className:"ButtonTab ".concat(t?"":"disabled"),to:{pathname:n,state:{internal:!0}}},"You")," ",s.a.createElement(J.a,{activeClassName:"current",className:"ButtonTab",to:"/drafts"},"Drafts")," ",s.a.createElement(J.a,{activeClassName:"current",className:"ButtonTab",to:"/connections"},"Feeds")," "))}}]),t}(r.Component);var K=Object(f.b)(function(e){return{users:e.users,notifications:e.notifications}})(G),X=n(88),$=n(266),ee=n(27),te=function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(l.a)(this,Object(d.a)(t).call(this,e))).doSave=function(){var e=n.state.toSave,t=e.title,a=e.description,r=e.html;n.props.dispatch(Object(v.a)({title:t,description:a,text:r}));var s=n.props,c=s.history,i=s.location;i.state&&i.state.internal?c.goBack():n.props.history.push("/")},n.hideConfirmation=function(){return n.setState({toSave:null})},n.handleSave=function(e){var t=e.title,a=e.description,r=e.html;if(!t||!r)return console.error("This should be a validation error: no title or no article");n.setState({toSave:{title:t,description:a,html:r}})},n.handleSaveDraft=function(e){var t,a=e.title,r=e.description,s=e.html;if(!a||!s)return console.error("This should be a validation error: no title or no article");n.props.dispatch((t={title:a,description:r,text:s},function(){var e=Object(O.a)(g.a.mark(function e(n,a){var r;return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S(t);case 2:return e.next=4,F();case 4:r=e.sent,n(B(r));case 6:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}())),n.props.history.push("/drafts")},n.handleCancel=function(){var e=n.props,t=e.history,a=e.location;a.state&&a.state.internal?t.goBack():n.props.history.push("/")},n.handleInfo=function(e){return n.props.dispatch(Object(v.j)(e))},n.state={toSave:null},n}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.readOnly,a=t.users;if(!n){var r=a.find(function(e){return e.isMaster});if(!r||!r.feed)return null;if(!r.metadata.size)return s.a.createElement($.a,{to:"/profile"})}return s.a.createElement("div",{className:"FullPage"},s.a.createElement(ee.a,{readOnly:n,html:this.props.html,title:this.props.title,description:this.props.description,onCancel:this.handleCancel,onSaveDraft:this.handleSaveDraft,onSave:this.handleSave}),this.state.toSave?s.a.createElement(Z.a,{text:"Do you really want to publish this article? It will be visible by anyone who has your feed address.",buttons:s.a.createElement(s.a.Fragment,null,s.a.createElement("button",{className:"Button Secondary",onClick:this.hideConfirmation},"Cancel"),s.a.createElement("button",{className:"Button Secondary",onClick:function(){return e.handleSaveDraft(e.state.toSave)}},"Save as draft"),s.a.createElement("button",{className:"Button",onClick:this.doSave},"Publish"))}):null)}}]),t}(s.a.Component);var ne=Object(f.b)(function(e){return{users:e.users}})(te),ae=n(116),re=n(14),se=(n(250),function(e){function t(){return Object(o.a)(this,t),Object(l.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return s.a.createElement("div",{className:"Page"},s.a.createElement("div",{className:"HomePage"},s.a.createElement("div",{className:"LogoName"},s.a.createElement("span",null,"V"),s.a.createElement("span",null,"I"),s.a.createElement("span",null,"T"),s.a.createElement("span",null,"R"),s.a.createElement("span",null,"I"),s.a.createElement("span",null,"O"),s.a.createElement("span",null,"L")),s.a.createElement(Q,{strokeWidth:2}),s.a.createElement("p",{className:"Blurb"},"Distributed, serverless publishing platform."),s.a.createElement("div",{className:"Links"},s.a.createElement(ae.a,{className:"Link",to:"/QmccRaHCrUKZwZpjdJFiTTdgp8FG3ALFDZQexaYgit3NCF/QmYJvZjnw8c1DqFbW1BpWmvb3jVg8fQYRUs6UzzEyosagA"},s.a.createElement(re.c,null)," ",s.a.createElement("span",{className:"LinkText"},"Read the user intro")),s.a.createElement("a",{target:"_blank",className:"Link",href:"https://gitlab.com/vitriolum/vitriol-web"},s.a.createElement(re.f,null)," ",s.a.createElement("span",{className:"LinkText"},"Read the code")))))}}]),t}(s.a.Component));var ce=Object(f.b)(function(e){return{users:e.users}})(se),ie=n(93),oe=n(51),ue=n(49),le=(n(252),function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(l.a)(this,Object(d.a)(t).call(this,e))).handleDelete=function(e){return n.setState({toDelete:e})},n.removeDraft=function(){n.props.dispatch(M(n.state.toDelete)),n.hideConfirmation()},n.hideConfirmation=function(){return n.setState({toDelete:null})},n.state={toDelete:null},n}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this,t=this.props.drafts.get("draftList");return s.a.createElement("div",{className:"DraftPage Page"},t.size?s.a.createElement(oe.a,{articleList:t,linkFormatter:function(e){return"/drafts/".concat(e.createdAt)},authorFormatter:function(){return"Draft"},onDelete:function(t){return e.handleDelete(t.createdAt)}}):s.a.createElement(ue.a,{isMaster:!0}),this.state.toDelete?s.a.createElement(Z.a,{text:"Do you really want to remove this draft?",buttons:s.a.createElement(s.a.Fragment,null,s.a.createElement("button",{className:"Button Secondary",onClick:this.hideConfirmation},"Cancel"),s.a.createElement("button",{className:"Button Alert",onClick:this.removeDraft},"Remove"))}):null)}}]),t}(s.a.Component));var de=Object(f.b)(function(e){return{drafts:e.drafts}})(le),pe=n(28),fe=function(e){function t(){var e,n;Object(o.a)(this,t);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(n=Object(l.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).handleSave=function(e){var t=e.title,a=e.description,r=e.html,s=n.props.match.params.draftHash;if(!t||!r)return console.error("This should be a validation error: no title or no article");n.props.dispatch(Object(v.a)({title:t,description:a,text:r})),n.props.dispatch(M(s)),n.props.history.goBack()},n.handleSaveDraft=function(e){var t,a,r=e.title,s=e.description,c=e.html,i=n.props.match.params.draftHash;if(!r||!c)return console.error("This should be a validation error: no title or no article");n.props.dispatch((t=i,a={title:r,description:s,text:c},function(){var e=Object(O.a)(g.a.mark(function e(n,r){var s;return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A(t,a);case 2:return e.next=4,F();case 4:s=e.sent,n(B(s));case 6:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}())),n.props.history.goBack()},n.handleCancel=function(){n.props.history.goBack()},n}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props.match.params.draftHash,t=this.props.drafts.get("draftList");if(!t||!t.size)return s.a.createElement(pe.a,{text:"Loading article..."});var n=t.find(function(t){return t.createdAt.toString()===e});return n?s.a.createElement("div",{className:"FullPage"},s.a.createElement(ee.a,{draftId:e,title:n.title,description:n.description,html:n.text,onCancel:this.handleCancel,onSaveDraft:this.handleSaveDraft,onSave:this.handleSave})):s.a.createElement("p",null,"Draft not found")}}]),t}(s.a.Component);var he=Object(f.b)(function(e){return{drafts:e.drafts}})(fe),me=n(48);n(254);function ve(e){var t=e.users;return s.a.createElement("ul",{className:"UserList"},t.toArray().map(function(e,t){var n=e.feed?e.feed.last():null,a=e.metadata;return a?s.a.createElement("li",{key:t,className:"Card"},s.a.createElement("h2",{className:"FeedHeading"},"Feed name:"),s.a.createElement(ae.a,{className:"FeedNameLink",to:"/".concat(e.hash)},s.a.createElement("span",{className:"FeedName"},a.get("name"))),s.a.createElement("span",{className:"FeedLocation"},"\u2014 ".concat(a.get("location"))),n?s.a.createElement("div",{className:"FeedLastPost"},s.a.createElement("h2",{className:"FeedHeading"},"Last post:"),s.a.createElement(ae.a,{className:"FeedTitleLink",to:"/".concat(e.hash,"/").concat(n.hash)},s.a.createElement("span",{className:"FeedLastPostTitle"},n.title)),s.a.createElement("span",{className:"FeedLastPostDate"},"\u2014 ".concat(Object(me.a)(n.createdAt)))):s.a.createElement("span",null)):s.a.createElement("p",{key:"0",className:"EmptyPlaceHolder"},"There seems to be nothing here.")}))}n(256);var be=function(e){function t(){return Object(o.a)(this,t),Object(l.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props.users.filter(function(e){return e.pinned}),t=this.props.users.filter(function(e){return!e.pinned&&!e.isMaster});return s.a.createElement("div",{className:"Page"},s.a.createElement("div",{className:"TrackedPage"},s.a.createElement("p",{className:"TrackedTitle"},"Feeds you've pinned:"),e.size?s.a.createElement(s.a.Fragment,null,s.a.createElement(ve,{users:e})):s.a.createElement("p",{className:"EmptyPlaceHolder"},"There seems to be nothing here."),s.a.createElement("p",{className:"TrackedTitle"},"Feeds you track in this session:"),t.size?s.a.createElement(s.a.Fragment,null,s.a.createElement(ve,{users:t})):s.a.createElement("p",{className:"EmptyPlaceHolder"},"There seems to be nothing here.")))}}]),t}(r.Component);var Ee=Object(f.b)(function(e){return{users:e.users}})(be),ge=(n(258),function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(l.a)(this,Object(d.a)(t).call(this,e))).handleNameChange=function(e){return n.setState({name:e.target.value})},n.handleInfoChange=function(e){return n.setState({info:e.target.value})},n.handleLocationChange=function(e){return n.setState({location:e.target.value})},n.handleSubmit=function(e){var t=n.state,a=t.name,r=t.info,s=t.location;a&&r&&s&&n.props.onSubmit({name:a,info:r,location:s})},n.state={name:"",info:"",location:"",hasInitialised:!1},n}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props.name?"SAVE":"CREATE",t=this.state,n=t.name,a=t.info,r=t.location,c=n&&a&&r;return s.a.createElement("div",{className:"PersonalInfo"},s.a.createElement("input",{name:"name",className:"PersonalInfoInput PersonalInfoName",value:n,onChange:this.handleNameChange,placeholder:"Enter your name..."}),s.a.createElement("input",{name:"location",className:"PersonalInfoInput PersonalInfoLocation",value:r,onChange:this.handleLocationChange,placeholder:"Enter your location..."}),s.a.createElement("textarea",{maxLength:250,rows:3,name:"info",className:"PersonalInfoInput PersonalInfoDetails",value:a,onChange:this.handleInfoChange,placeholder:"Enter some info about you..."}),s.a.createElement("button",{className:"Button Secondary PersonalInfoButton",onClick:this.props.onCancel},"CANCEL"),s.a.createElement("button",{disabled:!c,className:"Button PersonalInfoButton",onClick:this.handleSubmit},e))}}],[{key:"getDerivedStateFromProps",value:function(e,t){var n=e.name,a=e.info,r=e.location,s=n||a||r;return!t.hasInitialised&&s?{name:n,info:a,location:r,hasInitialised:!0}:null}}]),t}(s.a.Component)),Oe=function(e){function t(){var e,n;Object(o.a)(this,t);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(n=Object(l.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).handleSubmit=function(e){n.props.dispatch(Object(v.j)(e));var t=n.props,a=t.history,r=t.location;r.state&&r.state.internal?a.goBack():n.props.history.push("/")},n.handleCancel=function(){var e=n.props,t=e.history,a=e.location;console.log(a),a.state&&a.state.internal&&t.goBack(),n.props.history.push("/")},n}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props.users.find(function(e){return e.isMaster}),t=e&&e.metadata&&e.metadata.size?e.metadata.toObject():{},n=t.info,a=t.location,r=t.name;return s.a.createElement("div",{className:"Page"},s.a.createElement(ge,{onSubmit:this.handleSubmit,onCancel:this.handleCancel,info:n,location:a,name:r}))}}]),t}(s.a.Component);var ye=Object(f.b)(function(e){return{users:e.users}})(Oe);n(260);function je(){return s.a.createElement(ae.a,{to:{pathname:"/write",state:{internal:!0}}},s.a.createElement("button",{className:"WriteFloatingButton"},s.a.createElement(re.e,null)))}var xe=function(e){function t(e){var n;return Object(o.a)(this,t),n=Object(l.a)(this,Object(d.a)(t).call(this,e)),e.dispatch(Object(v.f)()),e.dispatch(function(){var e=Object(O.a)(g.a.mark(function e(t,n){var a;return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,F();case 2:a=e.sent,t(B(a));case 4:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()),e.dispatch(Object(v.h)()),n}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return this.props.error.unrecoverable?s.a.createElement(Z.a,{text:"There has been an unrecoverable error connecting to IPFS. Please retry again later.",buttons:s.a.createElement(s.a.Fragment,null,s.a.createElement("button",{className:"Button",onClick:function(){return window.location.reload(!0)}},"Refresh"))}):s.a.createElement(W.a,null,s.a.createElement(Y.a,{component:ke}))}}]),t}(r.Component);function ke(e){e.location;return s.a.createElement("div",{className:"View"},s.a.createElement(Y.a,{component:K}),s.a.createElement("div",{className:"Content"},s.a.createElement(V.a,null,s.a.createElement(Y.a,{exact:!0,component:Ne(ce),path:"/home"}),s.a.createElement(Y.a,{exact:!0,component:Ne(de),path:"/drafts"}),s.a.createElement(Y.a,{exact:!0,component:ne,path:"/write"}),s.a.createElement(Y.a,{exact:!0,component:Ne(Ee),path:"/connections"}),s.a.createElement(Y.a,{exact:!0,component:Ne(ye),path:"/profile"}),s.a.createElement(Y.a,{exact:!0,component:he,path:"/drafts/:draftHash"}),s.a.createElement(Y.a,{exact:!0,component:Ne(X.a),path:"/:userHash/"}),s.a.createElement(Y.a,{exact:!0,component:ie.a,path:"/:userHash/:articleHash"}),s.a.createElement(Y.a,{component:function(){return s.a.createElement(q.a,{to:"/home"})}}))))}function Ne(e){return function(t){return s.a.createElement(s.a.Fragment,null,s.a.createElement(je,null),s.a.createElement(e,t))}}var we=Object(f.b)(function(e){return{users:e.users,error:e.error}})(xe),Ce=(n(262),function(e){function t(){return Object(o.a)(this,t),Object(l.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return s.a.createElement(f.a,{store:z},s.a.createElement(we,null))}}]),t}(r.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(s.a.createElement(Ce,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},27:function(e,t,n){"use strict";var a=n(4),r=n(5),s=n(7),c=n(6),i=n(8),o=n(0),u=n.n(o),l=n(92),d=n.n(l),p=n(116),f=(n(246),n(248),function(e){function t(e){var n;return Object(a.a)(this,t),(n=Object(s.a)(this,Object(c.a)(t).call(this,e))).handleArticleChange=function(e){n.setState({html:e})},n.handleTitleChange=function(e){var t=e.target.value;n.setState({title:t})},n.handleDescriptionChange=function(e){var t=e.target.value;n.setState({description:t})},n.state={html:n.props.html||"",title:n.props.title||"",description:n.props.description||""},n}return Object(i.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this,n=this.props,a=n.readOnly,r=n.onCancel,s=n.onSaveDraft,c=n.onSave,i=this.state,o=i.html,l=i.title,f=i.description,h=!(o&&l&&f);return u.a.createElement("div",{className:"FeedEditor"},a?u.a.createElement("span",{className:"EditorTitle"},this.state.title):u.a.createElement("input",{maxLength:"80",placeholder:"Title",className:"EditorTitle",onChange:this.handleTitleChange,value:this.state.title}),a?u.a.createElement("span",{className:"EditorDescription"},this.state.description):u.a.createElement("textarea",{maxLength:"255",placeholder:"Description",className:"EditorDescription",onChange:this.handleDescriptionChange,value:this.state.description}),a&&this.props.author?u.a.createElement("span",{className:"EditorAuthor"},"by ",u.a.createElement(p.a,{to:this.props.author.url},this.props.author.name)):null,u.a.createElement(d.a,{theme:"bubble",readOnly:a,onChange:this.handleArticleChange,value:this.state.html,modules:t.modules,formats:t.formats,bounds:".app",placeholder:"Write something..."}),a?null:u.a.createElement("div",{className:"EditorCommands"},u.a.createElement("button",{className:"Button Secondary",onClick:r},"CANCEL"),u.a.createElement("button",{disabled:h,className:"Button Secondary",onClick:function(){return s(e.state)}},"DRAFT"),u.a.createElement("button",{disabled:h,className:"Button",onClick:function(){return c(e.state)}},"PUBLISH")))}}]),t}(u.a.Component));f.modules={toolbar:[[{header:"1"},{header:"2"}],["bold","italic","blockquote"],[{list:"ordered"},{list:"bullet"}],["link","image"],["clean"]],clipboard:{matchVisual:!1}},f.formats=["header","bold","italic","blockquote","list","bullet","link","image"],t.a=f},28:function(e,t,n){"use strict";var a=n(0),r=n.n(a);n(137);var s=function(e){var t=e.text;return r.a.createElement("div",{className:"loaderContainer"},t?r.a.createElement("p",null,t):null,r.a.createElement("div",{className:"spinner"}))},c={position:"absolute",top:0,bottom:0,left:0,right:0,display:"flex",alignItems:"center",justifyContent:"center"};t.a=function(e){var t=e.text;return r.a.createElement("div",{style:c},r.a.createElement(s,{text:t}))}},44:function(e,t,n){"use strict";n.d(t,"a",function(){return c}),n.d(t,"b",function(){return i});var a=n(18),r=n(13),s="ADD_NOTIFICATION";function c(e){return{type:"ADD_NOTIFICATION",notification:e}}function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object(r.List)([]),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case s:return e.unshift(Object(a.a)({},t.notification,{read:!1}));default:return e}}},45:function(e,t,n){"use strict";n.d(t,"b",function(){return s}),n.d(t,"a",function(){return i});var a=n(13),r="SET_UNRECOVERABLE";function s(e){return{type:"SET_UNRECOVERABLE",err:e}}var c=Object(a.Record)({unrecoverable:null});function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new c,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case r:return e.set("unrecoverable",t.err);default:return e}}},48:function(e,t,n){"use strict";n.d(t,"a",function(){return s});var a=n(90),r=n.n(a);function s(e){return r()(new Date(e),"MMMM, Do YYYY")}},49:function(e,t,n){"use strict";n.d(t,"a",function(){return c});var a=n(0),r=n.n(a),s=n(116);n(133);function c(e){var t=e.isMaster;return r.a.createElement("div",{className:"EmptyList"},r.a.createElement("p",{className:"EmptyListMessage"},"It seems there is nothing here."),t?r.a.createElement(s.a,{to:{pathname:"/write",state:{internal:!0}}},r.a.createElement("button",{className:"Button"},"Write post")):null)}},50:function(e,t,n){"use strict";n.d(t,"a",function(){return i});var a=n(0),r=n.n(a),s=n(116),c=n(14);n(135);function i(e){var t=e.hash;return r.a.createElement("div",{className:"InvalidAddress"},r.a.createElement(c.b,{className:"alert"}),r.a.createElement("div",{className:"message"},r.a.createElement("span",{className:"name"},t)," "," doesn't seem to be a valid id for a feed. ",r.a.createElement("br",null),"Please check your URL or"," ",r.a.createElement(s.a,{to:"/home"},"return to the home page"),"."))}},51:function(e,t,n){"use strict";var a=n(4),r=n(5),s=n(7),c=n(6),i=n(8),o=n(0),u=n.n(o),l=n(116),d=n(14),p=n(48);function f(e){return" "===e||"\n"===e||"\r"===e||"\t"===e}n(131);n.d(t,"a",function(){return m});var h=/<img\b[^>]+?src\s*=\s*['"]?([^\s'"?#>]+)/,m=function(e){function t(){var e,n;Object(a.a)(this,t);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(n=Object(s.a)(this,(e=Object(c.a)(t)).call.apply(e,[this].concat(i)))).handleDelete=function(e,t){e.stopPropagation(),e.preventDefault(),n.props.onDelete(t)},n}return Object(i.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.linkFormatter,a=t.authorFormatter,r=t.articleList,s=t.onDelete;return r.size?r.map(function(t,r){var c=h.exec(t.text),i=c?c[1]:null,o=Object(p.a)(t.createdAt);return u.a.createElement(l.a,{to:n(t),className:"Card",key:r},u.a.createElement("div",{className:"articleHeader"},u.a.createElement("div",{className:"articleDate"},o),s?u.a.createElement(d.h,{className:"articleDelete",onClickCapture:function(n){return e.handleDelete(n,t)}}):null),i?u.a.createElement("div",{className:"articleImageContainer"},u.a.createElement("img",{alt:t.title,className:"articleImagePreview",src:i})):null,u.a.createElement("span",{className:"articleTitle"},t.title),u.a.createElement("div",{className:"articleDescription"},t.description),u.a.createElement("div",{className:"articleAuthor"},"By ","".concat(a(t)," - ").concat(function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{wpm:200,wb:f},n=0,a=0,r=e.length-1,s=t.wb,c=t.wpm;s(e[a]);)a++;for(;s(e[r]);)r--;for(var i=a;i<=r;){for(;i<=r&&!s(e[i]);i++);for(n++;i<=r&&s(e[i]);i++);}var o=n/c,u=60*o*1e3;return{text:Math.ceil(o.toFixed(2))+" min read",minutes:o,time:u,words:n}}(t.text).text)))}):null}}]),t}(u.a.Component)},88:function(e,t,n){"use strict";(function(e){var a=n(4),r=n(5),s=n(7),c=n(6),i=n(8),o=n(0),u=n.n(o),l=n(9),d=n(10),p=n(89),f=n(51),h=n(49),m=n(50),v=n(28),b=n(20),E=n(91),g=(n(141),function(t){function n(e){var t;Object(a.a)(this,n),(t=Object(s.a)(this,Object(c.a)(n).call(this,e))).handleDelete=function(e){return t.setState({toDelete:e})},t.removeArticle=function(){t.props.dispatch(Object(d.d)(t.state.toDelete)),t.hideConfirmation()},t.hideConfirmation=function(){return t.setState({toDelete:null})},t.handlePin=function(){return t.props.dispatch(Object(d.i)(t.props.match.params.userHash,!0))},t.handleUnpin=function(){return t.props.dispatch(Object(d.i)(t.props.match.params.userHash,!1))},t.handleMore=function(){return t.props.dispatch(Object(d.b)(t.props.match.params.userHash))},t.handleProfileEdit=function(){return t.props.history.push("/profile",{internal:!0})};var r=t.props.match.params.userHash;return e.users.get(r)||e.dispatch(Object(d.g)(r)),t.state={toDelete:null},t}return Object(i.a)(n,t),Object(r.a)(n,[{key:"render",value:function(){var t=this,n=this.props.match.params.userHash,a=this.props.users.get(n);if(!e.OrbitDB.isValidAddress("/orbitdb/".concat(n,"/user")))return u.a.createElement(m.a,{hash:n});if(!a||!a.feed||!a.metadata)return u.a.createElement(v.a,{text:"Loading feed..."});var r=a.isMaster,s=a.feed&&a.feed.size&&a.feed.size<a.feed.first().feedLen,c=a.metadata,i=a.feed.reverse();return u.a.createElement("div",{className:"Page FeedPage"},u.a.createElement(p.a,{onEdit:this.handleProfileEdit,name:c.get("name"),location:c.get("location"),info:c.get("info"),showEdit:r,isPinned:a.pinned,onPin:this.handlePin,onUnpin:this.handleUnpin}),r?u.a.createElement(E.a,{url:"https://solipsis-project.github.io/vitriol-web/#/".concat(n)}):null,i.size?u.a.createElement(f.a,{articleList:i,linkFormatter:function(e){return"/".concat(n,"/").concat(e.hash)},authorFormatter:function(){return a.metadata.get("name")},onDelete:r?function(e){return t.handleDelete(e.hash)}:null}):u.a.createElement(h.a,{isMaster:r}),this.state.toDelete?u.a.createElement(b.a,{text:"Do you really want to remove this article?",buttons:u.a.createElement(u.a.Fragment,null,u.a.createElement("button",{className:"Button Secondary",onClick:this.hideConfirmation},"Cancel"),u.a.createElement("button",{className:"Button Alert",onClick:this.removeArticle},"Remove"))}):null,s?u.a.createElement("button",{className:"Button",onClick:this.handleMore},"More..."):null)}}]),n}(o.Component));var O=Object(l.b)(function(e){return{users:e.users}})(g);t.a=O}).call(this,n(25))},89:function(e,t,n){"use strict";var a=n(4),r=n(5),s=n(7),c=n(6),i=n(8),o=n(0),u=n.n(o),l=n(14),d=(n(117),function(e){function t(){var e,n;Object(a.a)(this,t);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(n=Object(s.a)(this,(e=Object(c.a)(t)).call.apply(e,[this].concat(i)))).handlePinUser=function(){var e=n.props,t=e.isPinned,a=e.onPin,r=e.onUnpin;t?r():a()},n}return Object(i.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this.props,t=e.name,n=e.location,a=e.info,r=e.showEdit,s=e.onEdit,c=e.isPinned,i="UserPinned ".concat(c?"pinned":"unpinned");return u.a.createElement("div",{className:"UserDetails"},u.a.createElement("div",{className:"UserDetailSection"},u.a.createElement("div",{className:"UserName"},t),u.a.createElement("div",{className:"UserLocation"},n),u.a.createElement("div",{className:"UserInfo"},a)),r?null:u.a.createElement(l.d,{className:i,onClick:this.handlePinUser}),r?u.a.createElement("div",{onClick:s,className:"Button UserEdit"},"Edit"):null)}}]),t}(o.Component));t.a=d},91:function(e,t,n){"use strict";n.d(t,"a",function(){return d});var a=n(4),r=n(5),s=n(7),c=n(6),i=n(8),o=n(0),u=n.n(o),l=n(14),d=(n(139),function(e){function t(e){var n;return Object(a.a)(this,t),(n=Object(s.a)(this,Object(c.a)(t).call(this,e))).handleCopy=function(){navigator.clipboard?navigator.clipboard.writeText(n.props.url).then(n.showCopied):(n.inputRef.select(),document.execCommand("copy"),n.showCopied())},n.showCopied=function(){n.setState({copied:!0}),setTimeout(function(){return n.setState({copied:!1})},2e3)},n.handleClick=function(){return n.inputRef.setSelectionRange(0,n.inputRef.value.length)},n.state={copied:!1},n}return Object(i.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this;return u.a.createElement("div",{className:"ShareProfile"},u.a.createElement("div",{className:"ShareProfileCard Card"},u.a.createElement("span",{className:"ShareProfileMessage"},u.a.createElement(l.g,null),u.a.createElement("span",{className:"ShareProfileTextMessage"},"You can share your feed using this address:")),u.a.createElement("div",{className:"ShareProfileContainer"},u.a.createElement("input",{className:"ShareInput",ref:function(t){return e.inputRef=t},onClick:this.handleClick,readOnly:!0,value:this.props.url}),u.a.createElement("button",{className:"ShareButton Button",onClick:this.handleCopy},"Copy")),u.a.createElement("span",{className:"ShareMessage ".concat(this.state.copied?"show":"")},"Copied!")))}}]),t}(u.a.Component))},93:function(e,t,n){"use strict";(function(e){var a=n(4),r=n(5),s=n(7),c=n(6),i=n(8),o=n(0),u=n.n(o),l=n(9),d=n(94),p=n.n(d),f=n(10),h=n(27),m=n(28),v=n(50),b=function(t){function n(t){var r;return Object(a.a)(this,n),(r=Object(s.a)(this,Object(c.a)(n).call(this,t))).getArticle=function(){if(!r.state.invalidAddress){var t=r.props.match.params.userHash;if(!e.OrbitDB.isValidAddress("/orbitdb/".concat(t,"/user")))return r.setState({invalidAddress:!0});if(!r.props.users.get(t))return r.props.dispatch(Object(f.g)(t));var n=r.props.match.params.articleHash,a=r.props.users.get(t),s=a.replication.get("meta")||a.replication.get("feed"),c=a?a.feed:null;if(c){var i=a.articles.get(n)||c.find(function(e){return e.hash===n});return i?r.setState({loading:!1,articleObject:i}):s?void 0:r.props.dispatch(Object(f.e)(t,n))}}},r.state={loading:!0,articleObject:null,invalidAddress:!1},r}return Object(i.a)(n,t),Object(r.a)(n,[{key:"componentDidMount",value:function(){this.getArticle()}},{key:"componentDidUpdate",value:function(){this.state.articleObject||this.getArticle()}},{key:"render",value:function(){var e=this.props.match.params.userHash,t=this.props.users.get(e);if(this.state.invalidAddress)return u.a.createElement(v.a,{hash:e});if(this.state.loading)return u.a.createElement(m.a,{text:"Loading article..."});var n=this.state.articleObject,a=p.a.sanitize(n.text);return u.a.createElement("div",{className:"FullPage"},u.a.createElement(h.a,{readOnly:!0,title:n.title,description:n.description,html:a,author:{name:t.metadata.get("name"),url:"/".concat(e)}}))}}]),n}(u.a.Component);var E=Object(l.b)(function(e){return{users:e.users}})(b);t.a=E}).call(this,n(25))},96:function(e,t,n){e.exports=n(264)}},[[96,2,1]]]);
//# sourceMappingURL=main.313c3d6d.chunk.js.map